# FastMCP SSE μ„λ²„ μ—”λ“ν¬μΈνΈ κ°€μ΄λ“

## π μ„λ²„ μ ‘μ† μ •λ³΄

### κΈ°λ³Έ μ„¤μ •
- **ν”„λ΅ν† μ½**: HTTP/HTTPS
- **ν†µμ‹  λ°©μ‹**: SSE (Server-Sent Events)
- **κΈ°λ³Έ ν¬νΈ**: 8000 (ν™κ²½λ³€μ SSE_PORTλ΅ λ³€κ²½ κ°€λ¥)

### ν™κ²½λ³€μ μ„¤μ •
```bash
# .env νμΌ
SSE_URL=localhost      # λλ” 0.0.0.0 (λ¨λ“  μΈν„°νμ΄μ¤)
SSE_PORT=8001         # μ›ν•λ” ν¬νΈ λ²νΈ
```

## π“΅ MCP ν”„λ΅ν† μ½ μ—”λ“ν¬μΈνΈ

### 1. **MCP ν†µμ‹  μ—”λ“ν¬μΈνΈ**
```
http://localhost:8000/mcp
```
- **μ©λ„**: MCP ν”„λ΅ν† μ½μ„ ν†µν• ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ ν†µμ‹ 
- **λ°©μ‹**: Server-Sent Events (SSE)
- **ν”„λ΅ν† μ½**: MCP (Model Context Protocol)

### 2. **λ„κµ¬ λ©λ΅ μ΅°ν**
```
http://localhost:8000/tools
```
- **μ©λ„**: μ‚¬μ© κ°€λ¥ν• MCP λ„κµ¬ λ©λ΅ ν™•μΈ
- **μ‘λ‹µ**: JSON ν•νƒμ λ„κµ¬ μ •λ³΄

### 3. **μ„λ²„ μƒνƒ ν™•μΈ**
```
http://localhost:8000/health
```
- **μ©λ„**: μ„λ²„ μƒνƒ λ° ν—¬μ¤ μ²΄ν¬
- **μ‘λ‹µ**: μ„λ²„ μƒνƒ μ •λ³΄

## π› οΈ μ‚¬μ© κ°€λ¥ν• MCP λ„κµ¬

### 1. **get_database_info()**
- **κΈ°λ¥**: λ°μ΄ν„°λ² μ΄μ¤ μ •λ³΄ λ° μ—°κ²° μƒνƒ μ΅°ν
- **λ§¤κ°λ³€μ**: μ—†μ
- **λ°ν™κ°’**: λ°μ΄ν„°λ² μ΄μ¤ μ •λ³΄ (μ—°κ²° μƒνƒ, λ°μ΄ν„°λ² μ΄μ¤λ…, ν…μ΄λΈ” μ λ“±)

### 2. **get_table_list()**
- **κΈ°λ¥**: λ°μ΄ν„°λ² μ΄μ¤μ λ¨λ“  ν…μ΄λΈ” λ©λ΅ μ΅°ν
- **λ§¤κ°λ³€μ**: μ—†μ
- **λ°ν™κ°’**: ν…μ΄λΈ” μ΄λ¦„ λ©λ΅

### 3. **get_table_schema(table_name)**
- **κΈ°λ¥**: νΉμ • ν…μ΄λΈ”μ μ¤ν‚¤λ§ μ •λ³΄ μ΅°ν
- **λ§¤κ°λ³€μ**: `table_name` (ν…μ΄λΈ” μ΄λ¦„)
- **λ°ν™κ°’**: ν…μ΄λΈ” μ¤ν‚¤λ§ μ •λ³΄ (μ»¬λΌλ…, νƒ€μ…, μ μ•½μ΅°κ±΄ λ“±)

### 4. **execute_sql(sql)**
- **κΈ°λ¥**: SQL μΏΌλ¦¬ μ§μ ‘ μ‹¤ν–‰
- **λ§¤κ°λ³€μ**: `sql` (μ‹¤ν–‰ν•  SQL μΏΌλ¦¬)
- **λ°ν™κ°’**: μΏΌλ¦¬ μ‹¤ν–‰ κ²°κ³Ό (λ°μ΄ν„°, ν–‰ μ, μ‹¤ν–‰ μ‹κ°„ λ“±)

### 5. **natural_language_query(query)**
- **κΈ°λ¥**: μμ—°μ–΄λ¥Ό SQLλ΅ λ³€ν™ν•μ—¬ μ‹¤ν–‰
- **λ§¤κ°λ³€μ**: `query` (μμ—°μ–΄λ΅ λ μΏΌλ¦¬)
- **λ°ν™κ°’**: μΏΌλ¦¬ μ‹¤ν–‰ κ²°κ³Ό

## π“± ν΄λΌμ΄μ–ΈνΈ μ ‘μ† λ°©λ²•

### 1. **MCP ν΄λΌμ΄μ–ΈνΈ μ ‘μ†**
```bash
# MCP ν”„λ΅ν† μ½μ„ μ§€μ›ν•λ” ν΄λΌμ΄μ–ΈνΈ
mcp://localhost:8000/mcp
```

### 2. **μ›Ή λΈλΌμ°μ €μ—μ„ ν™•μΈ**
```bash
# λ„κµ¬ λ©λ΅ ν™•μΈ
curl http://localhost:8000/tools

# μ„λ²„ μƒνƒ ν™•μΈ
curl http://localhost:8000/health
```

### 3. **Cursor IDEμ—μ„ μ‚¬μ©**
```json
// Cursor μ„¤μ • νμΌ
{
  "mcpServers": {
    "mysql-hub": {
      "command": "python",
      "args": ["-m", "mcp.server.fastmcp", "sse"],
      "env": {
        "SSE_URL": "localhost",
        "SSE_PORT": "8000"
      }
    }
  }
}
```

## π”§ μ„λ²„ μ‹¤ν–‰ λ°©λ²•

### 1. **μ§μ ‘ μ‹¤ν–‰**
```bash
cd server
python mcp_server.py
```

### 2. **ν™κ²½λ³€μμ™€ ν•¨κ» μ‹¤ν–‰**
```bash
SSE_URL=0.0.0.0 SSE_PORT=8001 python mcp_server.py
```

### 3. **Dockerλ΅ μ‹¤ν–‰**
```dockerfile
# Dockerfile μμ‹
FROM python:3.11-slim
WORKDIR /app
COPY . .
RUN pip install -r requirements.txt
EXPOSE 8000
CMD ["python", "mcp_server.py"]
```

## π“ λ΅κ·Έ ν™•μΈ

### μ„λ²„ μ‹μ‘ μ‹ λ΅κ·Έ
```
π”— MCP SSE μ„λ²„ μ—”λ“ν¬μΈνΈ μ •λ³΄
============================================================
π μ„λ²„ URL: http://localhost:8000
π“΅ MCP ν”„λ΅ν† μ½ μ—”λ“ν¬μΈνΈ:
   β€Ά /mcp - MCP ν”„λ΅ν† μ½ ν†µμ‹ 
   β€Ά /tools - μ‚¬μ© κ°€λ¥ν• λ„κµ¬ λ©λ΅
   β€Ά /health - μ„λ²„ μƒνƒ ν™•μΈ

π› οΈ  μ‚¬μ© κ°€λ¥ν• λ„κµ¬:
   β€Ά get_database_info() - λ°μ΄ν„°λ² μ΄μ¤ μ •λ³΄ μ΅°ν
   β€Ά get_table_list() - ν…μ΄λΈ” λ©λ΅ μ΅°ν
   β€Ά get_table_schema(table_name) - ν…μ΄λΈ” μ¤ν‚¤λ§ μ΅°ν
   β€Ά execute_sql(sql) - SQL μΏΌλ¦¬ μ‹¤ν–‰
   β€Ά natural_language_query(query) - μμ—°μ–΄ μΏΌλ¦¬

π“± ν΄λΌμ΄μ–ΈνΈ μ ‘μ† λ°©λ²•:
   β€Ά MCP ν΄λΌμ΄μ–ΈνΈ: http://localhost:8000/mcp
   β€Ά μ›Ή λΈλΌμ°μ €: http://localhost:8000/tools
============================================================
```

## π¨ λ¬Έμ  ν•΄κ²°

### 1. **ν¬νΈ μ¶©λ**
```bash
# ν¬νΈ μ‚¬μ© μ¤‘μΈ ν”„λ΅μ„Έμ¤ ν™•μΈ
netstat -tulpn | grep :8000

# λ‹¤λ¥Έ ν¬νΈλ΅ λ³€κ²½
SSE_PORT=8001 python mcp_server.py
```

### 2. **μ ‘μ† λ¶κ°€**
```bash
# λ°©ν™”λ²½ μ„¤μ • ν™•μΈ
# Windows: Windows Defender λ°©ν™”λ²½
# Linux: ufw λλ” iptables
# macOS: μ‹μ¤ν… ν™κ²½μ„¤μ • > λ³΄μ• λ° κ°μΈμ •λ³΄λ³΄νΈ
```

### 3. **κ¶ν• λ¬Έμ **
```bash
# κ΄€λ¦¬μ κ¶ν•μΌλ΅ μ‹¤ν–‰
sudo python mcp_server.py

# λλ” ν¬νΈ 1024 μ΄μƒ μ‚¬μ©
SSE_PORT=8000 python mcp_server.py
```

## π“ μ¶”κ°€ λ¦¬μ†μ¤

- [MCP ν”„λ΅ν† μ½ κ³µμ‹ λ¬Έμ„](https://modelcontextprotocol.io/)
- [FastMCP GitHub](https://github.com/jlowin/fastmcp)
- [MySQL Hub MCP ν”„λ΅μ νΈ](../README.md)
